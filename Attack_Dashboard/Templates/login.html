{% extends "base.html" %}

{% block content %}
<div class="min-h-screen flex items-center justify-center p-4 relative z-10">
    <div class="max-w-md w-full">
        <!-- Skull Animation -->
        <div class="text-center mb-8 animate-pulse">
            <div class="text-9xl text-[#ff0040] mb-4" style="text-shadow: 0 0 30px #ff0040;">☠</div>
            <h1 class="glitch text-5xl font-black text-[#00ff41] mb-2" data-text="ACCESS DENIED">
                ATTACK DASHBOARD
            </h1>
            <div class="text-[#ff0040] text-xl font-bold tracking-widest">
                AUTHORIZATION REQUIRED
            </div>
        </div>
        
        <div class="neon-box-red p-8 scan-line">
            <form id="loginForm" class="space-y-6">
                <!-- Username -->
                <div>
                    <label class="block text-[#00ff41] font-bold mb-2 text-lg tracking-wide">
                        <i class="fas fa-user-secret mr-2"></i>USER ID
                    </label>
                    <input type="text" id="username" name="username" required
                        placeholder="ENTER USERNAME"
                        class="w-full px-4 py-3 text-lg font-mono tracking-wider"
                        style="text-transform: uppercase;">
                </div>
                
                <!-- Password -->
                <div>
                    <label class="block text-[#00ff41] font-bold mb-2 text-lg tracking-wide">
                        <i class="fas fa-key mr-2"></i>ACCESS KEY
                    </label>
                    <input type="password" id="password" name="password" required
                        placeholder="ENTER PASSWORD"
                        class="w-full px-4 py-3 text-lg font-mono tracking-wider"
                        style="text-transform: uppercase;">
                </div>
                
                <!-- Error Message -->
                <div id="error-message" class="hidden neon-box-red p-4 text-center">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    <span class="text-[#ff0040] font-bold">ACCESS DENIED - INVALID CREDENTIALS</span>
                </div>
                
                <!-- Login Button -->
                <button type="submit" class="w-full attack-btn py-4 text-xl font-black tracking-widest">
                    <i class="fas fa-unlock mr-2"></i>LOGIN
                </button>
            </form>
            
            <!-- Default Creds -->
            <div class="mt-6 neon-box p-4 text-center">
                <div class="text-[#ffff00] text-sm font-bold mb-2">
                    <i class="fas fa-info-circle mr-2"></i>DEFAULT CREDENTIALS
                </div>
                <div class="text-[#00ff41] font-mono">
                    <div>USER: <span class="text-white">admin</span></div>
                    <div>PASS: <span class="text-white">admin123</span></div>
                </div>
            </div>
        </div>
        
        <!-- Warning -->
        <div class="neon-box-red p-4 mt-6 text-center">
            <div class="text-[#ff0040] font-bold text-sm">
                ⚠ UNAUTHORIZED ACCESS WILL BE LOGGED AND PROSECUTED ⚠
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const errorMsg = document.getElementById('error-message');
        
        try {
            const response = await fetch('/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            });
            
            const data = await response.json();
            
            if (data.success) {
                window.location.href = '/dashboard';
            } else {
                errorMsg.classList.remove('hidden');
                setTimeout(() => errorMsg.classList.add('hidden'), 3000);
            }
        } catch (error) {
            console.error('Login error:', error);
            errorMsg.classList.remove('hidden');
        }
    });
    
    // Matrix rain effect
    const canvas = document.createElement('canvas');
    canvas.style.position = 'fixed';
    canvas.style.top = '0';
    canvas.style.left = '0';
    canvas.style.zIndex = '1';
    canvas.style.opacity = '0.1';
    document.body.appendChild(canvas);
    
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const matrix = '01';
    const fontSize = 14;
    const columns = canvas.width / fontSize;
    const drops = [];
    
    for (let i = 0; i < columns; i++) {
        drops[i] = 1;
    }
    
    function draw() {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#00ff41';
        ctx.font = fontSize + 'px monospace';
        
        for (let i = 0; i < drops.length; i++) {
            const text = matrix[Math.floor(Math.random() * matrix.length)];
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);
            
            if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                drops[i] = 0;
            }
            drops[i]++;
        }
    }
    
    setInterval(draw, 35);
</script>
{% endblock %}